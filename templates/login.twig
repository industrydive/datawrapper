{% block login %}

    <div class="modal hide" id="dwLoginForm">
        <!--<div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h2>&nbsp;</h2>
        </div>-->
        <div class="modal-body">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <div class="row">
                <div class="span3 row-login">

                    <h3>Login</h3>

                    <p>{% trans "We're glad to see you again. Login to access your charts, and create new ones." %}</p>

                    <div class="login-form form-vertical">
                        <div class="control-group"><input class="login-email input-xxlarge span3" type="text" value="" placeholder="{% trans "TWPN username" %}" /></div>
                        <div class="control-group"><input class="login-pwd input-xxlarge span3" type="password" value="" placeholder="{% trans "password" %}" /></div>

                        <div class="row">
                            <div class="span2" style="padding-bottom:10px">
                                <a class="btn btn-login btn-primary btn-large">
                                    <i class="icon-user icon-white"></i> {% trans "Login" %}
                                </a>
                            </div>
                            <div class="span2">
                                <label class="checkbox" for="keep-login">
                                    <input id="keep-login" class="keep-login" type="checkbox" checked="checked"> {% trans "Remember login?" %}
                                </label>
                            </div>
                        </div>
                    </div>

                </div>
                <style>
                #dwLoginForm {
                    width: 420px;
                    margin-left: -210px;
                    box-shadow: 0 0 20px rgba(0,0,0, 0.3);
                    border: 0;
                    position: relative;
                }
                </style>
            </div>
            {% if has_hook('alternative_signin') %}
            <div style="padding:10px 13px 0;border-top:1px solid #eee;text-align:center">
               {% trans "Alternatively you can sign in via: " %}
                <div style="margin-top:4px">
                    {{ hook('alternative_signin') }}
                </div>
            </div>
            {% endif %}
        </div>

    </div>

        <script type="text/javascript">
        $(function() {
                $('.login-email').parent().removeClass('error');
                $.ajax({
                    url: '/api/account/reset-password',
                    type: 'POST',
                    contentType: 'application/json',
                    dataType: 'json',
                    data: JSON.stringify({
                        email: $('.login-email').val()
                    }),
                    success: function(res) {
                        if (res.status == 'ok') {
                            dw.backend.logMessage(res.data, $(e.target).parent());
                        } else {
                            if (res.code == 'login-email-unknown') {
                                $('.login-email').parent().addClass('error');
                            }
                            dw.backend.logError(res.message, $(e.target).parent());
                        }
                    }
                });
            });
        });
        </script>

{% endblock %}
